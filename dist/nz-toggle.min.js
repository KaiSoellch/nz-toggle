!function(){var e=angular.module("nzToggle",[]);e.directive("nzToggle",["$timeout",function(e){return{restrict:"E",replace:!0,scope:{config:"=?",ngModel:"=",onToggle:"&",ngDisabled:"="},template:['<div class="nz-toggle-wrap" ng-class="getStyle()" ng-style="wrapStyle">','   <div class="nz-toggle">','       <div class="nz-toggle-handle"></div>',"   </div>",'   <div class="nz-toggle-tooltip" ng-show="tooltip">',"       <span ng-class=\"{'active': showTooltip1}\">",'           <span ng-show="tipFalse"></span>{{tipFalse}}',"       </span>",'       <br ng-show="vertical">','       <span ng-class="{\'active\': showTooltip2}" ng-show="triToggle">','           <span ng-show="tipNull"></span>{{tipNull}}',"       </span>",'       <br ng-show="vertical">',"       <span ng-class=\"{'active': showTooltip3}\">",'           <span ng-show="tipTrue"></span>{{tipTrue}}',"       </span>","   </div>","</div>"].join(""),link:function(t,o,l){function a(){u(),y(D.ngModel)||(y(D.valDefault)?D.ngModel=D.valDefault:D.triToggle?D.ngModel=D.valNull:D.ngModel=D.valFalse);var e=!0;D.$watch("ngModel",function(){if(c(),e)return void(e=!1);if(D.onToggle.call){var t=D.onToggle();t&&t.call&&t(D.ngModel)}},!0),p(o[0],"mousedown touchstart",i),p(o[0],"click",n),D.$on("$destroy",function(){v(o[0],"mousedown touchstart",i),v(window,"mousemove touchmove",r),v(window,"mouseup touchend",s),v(o[0],"click",n)})}function n(e){1>T&&d()}function i(e){return D.ngDisabled?void 0:(e=e?e:window.event,h={x:e.pageX||e.touches[0].pageX,y:e.pageY||e.touches[0].pageY},T=0,M.css("transition","0s"),p(window,"mousemove touchmove",r),p(window,"mouseup touchend",s),e.stopPropagation(),e.returnValue=!1,!1)}function r(e){e=e?e:window.event;var t=(e.pageY||e.touches[0].pageY)-h.y,l=(e.pageX||e.touches[0].pageX)-h.x,a=o[0].offsetHeight,n=o[0].offsetWidth,i=t/(a/2)*100,r=l/(n/2)*100;return D.vertical?(w=parseFloat(F.vertical[D.state]),f=Math.max(Math.min(parseFloat(i+w),100),0),m=w+(f-w)/2,M.css("top",m+"%")):(w=parseFloat(F.horizontal[D.state]),f=Math.max(Math.min(parseFloat(r+w),100),0),m=w+(f-w)/2,M.css("left",m+"%")),T=Math.max(T,Math.max(Math.abs(t),Math.abs(l))),e.stopPropagation(),e.returnValue=!1,!1}function s(e){return e=e?e:window.event,h=!1,D.$apply(function(){return 1>T&&"mouseup"==e.type?void 0:1>T&&"touchend"==e.type?void d():D.triToggle?D.vertical?f>73?void d("false"):f>27?void d("null"):void d("true"):27>f?void d("false"):73>f?void d("null"):void d("true"):D.vertical?f>50?void d("false"):void d("true"):50>f?void d("false"):void d("true")}),M.css({top:"",left:"",transition:""}),v(window,"mousemove touchmove",r),v(window,"mouseup touchend",s),e.stopPropagation(),e.returnValue=!1,!1}function u(){if(angular.extend(D,N,D.config||{}),y(l.triToggle)&&(D.triToggle=!0),angular.forEach(["valDefault","valTrue","valFalse","valNull","width","height","colorFalse","colorNull","colorTrue","tipTrue","tipFalse","tipNull"],function(e){y(l[e])&&(D[e]=D.$eval(l[e]))}),(D.tipTrue||l.tipFalse||l.tipNull)&&(D.tooltip=!0),y(l.vertical)){D.vertical=!0;var e;D.tooltip&&(e=D.tipTrue,D.tipTrue=D.tipFalse,D.tipFalse=e),D.$eval(l.width)||D.$eval(l.width)||D.config&&(D.config.width||D.config.height)||(e=D.width,D.width=D.height,D.height=e)}D.wrapStyle={width:D.width+"px",height:D.height+"px"},y(D.outerRadius)||(D.outerRadius=Math.min(D.width,D.height)/2),D.innerRadius=D.outerRadius-D.padding}function g(){return[D.vertical?"vertical":"horizontal",D.state]}function c(){return D.showTooltip1=!1,D.showTooltip2=!1,D.showTooltip3=!1,angular.equals(D.ngModel,D.valTrue)?(D.wrapStyle.backgroundColor=D.colorTrue,D.state="true",void(D.vertical?D.showTooltip1=!0:D.showTooltip3=!0)):angular.equals(D.ngModel,D.valFalse)?(D.state="false",D.wrapStyle.backgroundColor=D.colorFalse,void(D.vertical?D.showTooltip3=!0:D.showTooltip1=!0)):(D.state="null",D.wrapStyle.backgroundColor=D.colorNull,void(D.showTooltip2=!0))}function d(t){D.ngDisabled||e(function(){t?(D.state=t,"false"===t?D.ngModel=D.valFalse:"null"===t?D.ngModel=D.valNull:D.ngModel=D.valTrue):"false"==D.state?D.ngModel=D.triToggle?D.valNull:D.valTrue:"null"==D.state?D.ngModel=D.valTrue:D.ngModel=D.valFalse})}function p(e,t,o){for(var l=t.split(" "),a=0,n=l.length;n>a;a++)e.addEventListener(l[a],o,!1)}function v(e,t,o){for(var l=t.split(" "),a=0,n=l.length;n>a;a++)e.removeEventListener(l[a],o,!1)}var h,w,f,T,m,M=angular.element(o[0].querySelector(".nz-toggle-handle")),F={horizontal:{"false":0,"null":50,"true":100},vertical:{"false":100,"null":50,"true":0}},y=angular.isDefined,N={vertical:!1,valTrue:!0,valFalse:!1,valNull:null,width:50,height:25,padding:3,colorTrue:"#60BD68",colorFalse:"#F15854",colorNull:"#DDD",tooltip:!1},D=t;angular.extend(D,{getStyle:g,toggle:d}),a()}}}])}();